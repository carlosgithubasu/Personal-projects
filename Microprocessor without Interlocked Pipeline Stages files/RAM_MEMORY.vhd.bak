LIBRARY IEEE;
USE IEEE.STD_LOGIC_1164.ALL;
USE IEEE.NUMERIC_STD.ALL;

ENTITY RAM_MEMORY IS 
	PORT( ADDRESS : IN STD_LOGIC_VECTOR ( 3 DOWNTO 0 );
			WRITE_DATA : IN STD_LOGIC_VECTOR ( 15 DOWNTO 0 );
			READ_DATA : OUT STD_LOGIC_VECTOR ( 15 DOWNTO 0 );
			RW , CLK : IN  STD_LOGIC);
END RAM_MEMORY;

ARCHITECTURE STRUCTURAL OF  RAM_MEMORY IS

BEGIN 
PROCESS(CLK, RW) 
		SUBTYPE RAM_REGISTER IS STD_LOGIC_VECTOR ( 15 DOWNTO 0);  --Ancho del bus de datos
		TYPE REG_WIDTH IS ARRAY ( 0 TO 15 ) OF  RAM_REGISTER;  --Ancho del bus de direcciones
		VARIABLE RAM : REG_WIDTH := ( OTHERS => (OTHERS => '0'));  --relleno direcciones con ceros
		
BEGIN

	IF RISING_EDGE(CLK) THEN
		IF RW = '0'  THEN
		RAM ( TO_INTEGER( UNSIGNED(ADDRESS) ) ) := WRITE_DATA;
	   ELSIF RW = '1' THEN
	   READ_DATA <= RAM ( TO_INTEGER ( UNSIGNED(ADDRESS) ) );
		END IF;
	END IF;
END PROCESS;
END STRUCTURAL;

		
		
	


