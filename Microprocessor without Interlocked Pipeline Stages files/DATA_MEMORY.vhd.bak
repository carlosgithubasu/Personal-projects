--Carlos Perez Araujo , Tecnologico de Estudios Superiores de Monterrey

LIBRARY IEEE;
USE IEEE.STD_LOGIC_1164.ALL;
USE IEEE.NUMERIC_STD.ALL;


ENTITY DATA_MEMORY IS
	PORT( ADDRESS : IN STD_LOGIC_VECTOR (4 DOWNTO 0 );
			WRITE_DATA : IN STD_LOGIC_VECTOR (31 DOWNTO 0 );
			READ_DATA : OUT STD_LOGIC_VECTOR (31 DOWNTO 0 );
			CLK, WRITE_ENABLE, READ_ENABLE, ENABLE: IN STD_LOGIC);
END  DATA_MEMORY;

ARCHITECTURE BEHAVIORAL OF DATA_MEMORY IS

SUBTYPE DATA_MEMORY_REGISTER IS STD_LOGIC_VECTOR ( 31 DOWNTO 0 );  --Ancho del bus memoria de datos
TYPE DATA_MEMORY_WIDTH IS ARRAY ( 0 TO 31 ) OF  DATA_MEMORY_REGISTER;  --Ancho del bus de direcciones
SIGNAL MEMORY_DATA : DATA_MEMORY_WIDTH := ( OTHERS => (OTHERS => '0'));  --relleno direcciones con ceros

BEGIN

PROCESS(CLK)
BEGIN

  IF FALLING_EDGE(CLK) THEN
		IF WRITE_ENABLE  = '1' AND READ_ENABLE = '0' THEN
		MEMORY_DATA (TO_INTEGER(UNSIGNED(ADDRESS))) <=  WRITE_DATA;
		ELSIF WRITE_ENABLE = '0' AND READ_ENABLE = '1' THEN
		READ_DATA <= MEMORY_DATA (TO_INTEGER(UNSIGNED(ADDRESS)));
		ELSE NULL;
		END IF;
 END IF;
END PROCESS;
END BEHAVIORAL;
		
